{"ast":null,"code":"// Pyth Network Price Feed Integration for Frontend\n// Pyth Price Service endpoint\nconst PYTH_PRICE_SERVICE='https://hermes.pyth.network';// Pyth Price Feed IDs\nexport const PYTH_PRICE_FEEDS={'btcusdt':'0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43',// BTC/USD\n'ethusdt':'0xff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace',// ETH/USD\n'solusdt':'0xef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d',// SOL/USD\n'maticusdt':'0x5de33a9112c2b700b8d30b8a3402c103578ccfa2765696471cc672bd5cf6ac52',// MATIC/USD\n'xrpusdt':'0xec5d399846a9209f3fe5881d70aae9268c94339ff9817e8d18ff19fa05eea1c8',// XRP/USD\n'dogeusdt':'0xdcef50dd0a4cd2dcc17e45df1676dcb336a11a61c69df7a0299b0150c672d25c',// DOGE/USD\n'adausdt':'0x2a01deaec9e51a579277b34b122399984d0bbf57e2458a7e42fecd2829867a0d',// ADA/USD\n'avaxusdt':'0x93da3352f9f1d105fdfe4971cfa80e9dd777bfc5d0f683ebb6e1294b92137bb7',// AVAX/USD\n'dotusdt':'0xca3eed9b267293f6595901c734c7525ce8ef49adafe8284606ceb307afa2ca5b',// DOT/USD\n'linkusdt':'0x8ac0c70fff57e9aefdf5edf44b51d62c2d433653cbb2cf5cc06bb115af04d221'// LINK/USD\n};/**\n * Get latest price from Pyth Network\n * @param {string} symbol - Trading pair symbol (e.g., 'btcusdt')\n * @returns {Promise<number>} - Latest price\n */export async function getPythPrice(symbol){try{const priceId=PYTH_PRICE_FEEDS[symbol.toLowerCase()];if(!priceId){console.warn(\"Price feed not found for \".concat(symbol));return null;}const response=await fetch(\"\".concat(PYTH_PRICE_SERVICE,\"/api/latest_price_feeds?ids[]=\").concat(priceId));const data=await response.json();if(data&&data.length>0){const priceData=data[0];const price=priceData.price.price;const expo=priceData.price.expo;const conf=priceData.price.conf;// Calculate actual price\nconst actualPrice=price*Math.pow(10,expo);const confidence=conf*Math.pow(10,expo);return{price:actualPrice,confidence:confidence,timestamp:priceData.price.publish_time};}return null;}catch(error){console.error(\"Error fetching Pyth price for \".concat(symbol,\":\"),error);return null;}}/**\n * Subscribe to real-time price updates using WebSocket\n * @param {string} symbol - Trading pair symbol\n * @param {Function} callback - Callback function to handle price updates\n * @returns {Function} - Unsubscribe function\n */export function subscribeToPythPrice(symbol,callback){const priceId=PYTH_PRICE_FEEDS[symbol.toLowerCase()];if(!priceId){console.warn(\"Price feed not found for \".concat(symbol));return()=>{};}// Use Pyth WebSocket for real-time updates\nconst ws=new WebSocket(\"wss://hermes.pyth.network/ws\");ws.onopen=()=>{// Subscribe to price feed\nws.send(JSON.stringify({type:'subscribe',ids:[priceId]}));console.log(\"Subscribed to Pyth price feed for \".concat(symbol));};ws.onmessage=event=>{try{const data=JSON.parse(event.data);if(data.type==='price_update'){const priceData=data.price_feed;const price=priceData.price.price;const expo=priceData.price.expo;const actualPrice=price*Math.pow(10,expo);callback({price:actualPrice,timestamp:priceData.price.publish_time,symbol:symbol});}}catch(error){console.error('Error parsing Pyth WebSocket message:',error);}};ws.onerror=error=>{console.error('Pyth WebSocket error:',error);};ws.onclose=()=>{console.log(\"Disconnected from Pyth price feed for \".concat(symbol));};// Return unsubscribe function\nreturn()=>{if(ws.readyState===WebSocket.OPEN){ws.send(JSON.stringify({type:'unsubscribe',ids:[priceId]}));}ws.close();};}/**\n * Simple HTTP polling for price updates (fallback)\n * @param {string} symbol - Trading pair symbol\n * @param {Function} callback - Callback function\n * @param {number} interval - Polling interval in ms (default: 1000)\n * @returns {Function} - Stop polling function\n */export function pollPythPrice(symbol,callback){let interval=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1000;let isPolling=true;const poll=async()=>{while(isPolling){const priceData=await getPythPrice(symbol);if(priceData){callback(priceData);}await new Promise(resolve=>setTimeout(resolve,interval));}};poll();// Return stop function\nreturn()=>{isPolling=false;};}","map":{"version":3,"names":["PYTH_PRICE_SERVICE","PYTH_PRICE_FEEDS","getPythPrice","symbol","priceId","toLowerCase","console","warn","concat","response","fetch","data","json","length","priceData","price","expo","conf","actualPrice","Math","pow","confidence","timestamp","publish_time","error","subscribeToPythPrice","callback","ws","WebSocket","onopen","send","JSON","stringify","type","ids","log","onmessage","event","parse","price_feed","onerror","onclose","readyState","OPEN","close","pollPythPrice","interval","arguments","undefined","isPolling","poll","Promise","resolve","setTimeout"],"sources":["/Users/idcuq/Documents/AION-X POLYGON/Aion-x-main/frontend/src/utils/pythPrice.js"],"sourcesContent":["// Pyth Network Price Feed Integration for Frontend\n\n// Pyth Price Service endpoint\nconst PYTH_PRICE_SERVICE = 'https://hermes.pyth.network';\n\n// Pyth Price Feed IDs\nexport const PYTH_PRICE_FEEDS = {\n  'btcusdt': '0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43', // BTC/USD\n  'ethusdt': '0xff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace', // ETH/USD\n  'solusdt': '0xef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d', // SOL/USD\n  'maticusdt': '0x5de33a9112c2b700b8d30b8a3402c103578ccfa2765696471cc672bd5cf6ac52', // MATIC/USD\n  'xrpusdt': '0xec5d399846a9209f3fe5881d70aae9268c94339ff9817e8d18ff19fa05eea1c8', // XRP/USD\n  'dogeusdt': '0xdcef50dd0a4cd2dcc17e45df1676dcb336a11a61c69df7a0299b0150c672d25c', // DOGE/USD\n  'adausdt': '0x2a01deaec9e51a579277b34b122399984d0bbf57e2458a7e42fecd2829867a0d', // ADA/USD\n  'avaxusdt': '0x93da3352f9f1d105fdfe4971cfa80e9dd777bfc5d0f683ebb6e1294b92137bb7', // AVAX/USD\n  'dotusdt': '0xca3eed9b267293f6595901c734c7525ce8ef49adafe8284606ceb307afa2ca5b', // DOT/USD\n  'linkusdt': '0x8ac0c70fff57e9aefdf5edf44b51d62c2d433653cbb2cf5cc06bb115af04d221', // LINK/USD\n};\n\n/**\n * Get latest price from Pyth Network\n * @param {string} symbol - Trading pair symbol (e.g., 'btcusdt')\n * @returns {Promise<number>} - Latest price\n */\nexport async function getPythPrice(symbol) {\n  try {\n    const priceId = PYTH_PRICE_FEEDS[symbol.toLowerCase()];\n    \n    if (!priceId) {\n      console.warn(`Price feed not found for ${symbol}`);\n      return null;\n    }\n\n    const response = await fetch(`${PYTH_PRICE_SERVICE}/api/latest_price_feeds?ids[]=${priceId}`);\n    const data = await response.json();\n    \n    if (data && data.length > 0) {\n      const priceData = data[0];\n      const price = priceData.price.price;\n      const expo = priceData.price.expo;\n      const conf = priceData.price.conf;\n      \n      // Calculate actual price\n      const actualPrice = price * Math.pow(10, expo);\n      const confidence = conf * Math.pow(10, expo);\n      \n      return {\n        price: actualPrice,\n        confidence: confidence,\n        timestamp: priceData.price.publish_time,\n      };\n    }\n\n    return null;\n  } catch (error) {\n    console.error(`Error fetching Pyth price for ${symbol}:`, error);\n    return null;\n  }\n}\n\n/**\n * Subscribe to real-time price updates using WebSocket\n * @param {string} symbol - Trading pair symbol\n * @param {Function} callback - Callback function to handle price updates\n * @returns {Function} - Unsubscribe function\n */\nexport function subscribeToPythPrice(symbol, callback) {\n  const priceId = PYTH_PRICE_FEEDS[symbol.toLowerCase()];\n  \n  if (!priceId) {\n    console.warn(`Price feed not found for ${symbol}`);\n    return () => {};\n  }\n\n  // Use Pyth WebSocket for real-time updates\n  const ws = new WebSocket(`wss://hermes.pyth.network/ws`);\n  \n  ws.onopen = () => {\n    // Subscribe to price feed\n    ws.send(JSON.stringify({\n      type: 'subscribe',\n      ids: [priceId],\n    }));\n    console.log(`Subscribed to Pyth price feed for ${symbol}`);\n  };\n\n  ws.onmessage = (event) => {\n    try {\n      const data = JSON.parse(event.data);\n      \n      if (data.type === 'price_update') {\n        const priceData = data.price_feed;\n        const price = priceData.price.price;\n        const expo = priceData.price.expo;\n        const actualPrice = price * Math.pow(10, expo);\n        \n        callback({\n          price: actualPrice,\n          timestamp: priceData.price.publish_time,\n          symbol: symbol,\n        });\n      }\n    } catch (error) {\n      console.error('Error parsing Pyth WebSocket message:', error);\n    }\n  };\n\n  ws.onerror = (error) => {\n    console.error('Pyth WebSocket error:', error);\n  };\n\n  ws.onclose = () => {\n    console.log(`Disconnected from Pyth price feed for ${symbol}`);\n  };\n\n  // Return unsubscribe function\n  return () => {\n    if (ws.readyState === WebSocket.OPEN) {\n      ws.send(JSON.stringify({\n        type: 'unsubscribe',\n        ids: [priceId],\n      }));\n    }\n    ws.close();\n  };\n}\n\n/**\n * Simple HTTP polling for price updates (fallback)\n * @param {string} symbol - Trading pair symbol\n * @param {Function} callback - Callback function\n * @param {number} interval - Polling interval in ms (default: 1000)\n * @returns {Function} - Stop polling function\n */\nexport function pollPythPrice(symbol, callback, interval = 1000) {\n  let isPolling = true;\n  \n  const poll = async () => {\n    while (isPolling) {\n      const priceData = await getPythPrice(symbol);\n      if (priceData) {\n        callback(priceData);\n      }\n      await new Promise(resolve => setTimeout(resolve, interval));\n    }\n  };\n  \n  poll();\n  \n  // Return stop function\n  return () => {\n    isPolling = false;\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import{createContext,useContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const WalletContext=/*#__PURE__*/createContext();const MATIC_CHAIN_ID='0x13882';// Polygon Amoy Testnet (for testing)\nconst MATIC_MAINNET_CHAIN_ID='0x89';// Polygon Mainnet\nexport const useWallet=()=>{const context=useContext(WalletContext);if(!context){throw new Error('useWallet must be used within WalletProvider');}return context;};export const WalletProvider=_ref=>{let{children}=_ref;const[isConnected,setIsConnected]=useState(false);const[address,setAddress]=useState('');const[balance,setBalance]=useState('0');const[chainId,setChainId]=useState('');const[walletType,setWalletType]=useState('');// 'metamask' or 'zedpay'\nuseEffect(()=>{checkConnection();},[]);const checkConnection=async()=>{if(typeof window.ethereum!=='undefined'){try{const accounts=await window.ethereum.request({method:'eth_accounts'});if(accounts.length>0){setAddress(accounts[0]);setIsConnected(true);setWalletType('metamask');await updateBalance(accounts[0]);const chain=await window.ethereum.request({method:'eth_chainId'});setChainId(chain);}}catch(error){console.error('Error checking connection:',error);}}};const updateBalance=async addr=>{try{const bal=await window.ethereum.request({method:'eth_getBalance',params:[addr,'latest']});const balanceInBNB=parseInt(bal,16)/1e18;setBalance(balanceInBNB.toFixed(4));}catch(error){console.error('Error fetching balance:',error);}};const switchToBNBChain=async()=>{try{await window.ethereum.request({method:'wallet_switchEthereumChain',params:[{chainId:MATIC_CHAIN_ID}]});}catch(switchError){if(switchError.code===4902){try{await window.ethereum.request({method:'wallet_addEthereumChain',params:[{chainId:MATIC_CHAIN_ID,chainName:'Polygon Testnet',nativeCurrency:{name:'tBNB',symbol:'tBNB',decimals:18},rpcUrls:['https://rpc-amoy.polygon.technology/'],blockExplorerUrls:['https://amoy.polygonscan.com/']}]});}catch(addError){throw addError;}}else{throw switchError;}}};const connectMetaMask=async()=>{if(typeof window.ethereum==='undefined'){alert('MetaMask is not installed. Please install MetaMask to continue.');return;}try{const accounts=await window.ethereum.request({method:'eth_requestAccounts'});const chain=await window.ethereum.request({method:'eth_chainId'});if(chain!==MATIC_CHAIN_ID){await switchToBNBChain();}setAddress(accounts[0]);setIsConnected(true);setWalletType('metamask');setChainId(chain);await updateBalance(accounts[0]);window.ethereum.on('accountsChanged',handleAccountsChanged);window.ethereum.on('chainChanged',handleChainChanged);}catch(error){console.error('Error connecting MetaMask:',error);alert('Failed to connect MetaMask');}};const connectZedpay=async()=>{try{alert('Zedpay integration coming soon!');setIsConnected(true);setAddress('0xZEDPAY'+Math.random().toString(36).substring(7));setBalance('0.0');setWalletType('zedpay');}catch(error){console.error('Error connecting Zedpay:',error);}};const handleAccountsChanged=accounts=>{if(accounts.length===0){disconnectWallet();}else{setAddress(accounts[0]);updateBalance(accounts[0]);}};const handleChainChanged=newChainId=>{setChainId(newChainId);window.location.reload();};const disconnectWallet=()=>{setIsConnected(false);setAddress('');setBalance('0');setChainId('');setWalletType('');if(window.ethereum){window.ethereum.removeListener('accountsChanged',handleAccountsChanged);window.ethereum.removeListener('chainChanged',handleChainChanged);}};const connectWallet=connectMetaMask;return/*#__PURE__*/_jsx(WalletContext.Provider,{value:{isConnected,address,balance,chainId,walletType,connectWallet,connectMetaMask,connectZedpay,disconnectWallet,switchToBNBChain},children:children});};","map":{"version":3,"names":["createContext","useContext","useState","useEffect","jsx","_jsx","WalletContext","MATIC_CHAIN_ID","MATIC_MAINNET_CHAIN_ID","useWallet","context","Error","WalletProvider","_ref","children","isConnected","setIsConnected","address","setAddress","balance","setBalance","chainId","setChainId","walletType","setWalletType","checkConnection","window","ethereum","accounts","request","method","length","updateBalance","chain","error","console","addr","bal","params","balanceInBNB","parseInt","toFixed","switchToBNBChain","switchError","code","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","blockExplorerUrls","addError","connectMetaMask","alert","on","handleAccountsChanged","handleChainChanged","connectZedpay","Math","random","toString","substring","disconnectWallet","newChainId","location","reload","removeListener","connectWallet","Provider","value"],"sources":["/Users/idcuq/Documents/AION-X POLYGON/Aion-x-main/frontend/src/context/WalletContext.jsx"],"sourcesContent":["import { createContext, useContext, useState, useEffect } from 'react';\n\nconst WalletContext = createContext();\n\nconst MATIC_CHAIN_ID = '0x13882'; // Polygon Amoy Testnet (for testing)\nconst MATIC_MAINNET_CHAIN_ID = '0x89'; // Polygon Mainnet\n\nexport const useWallet = () => {\n  const context = useContext(WalletContext);\n  if (!context) {\n    throw new Error('useWallet must be used within WalletProvider');\n  }\n  return context;\n};\n\nexport const WalletProvider = ({ children }) => {\n  const [isConnected, setIsConnected] = useState(false);\n  const [address, setAddress] = useState('');\n  const [balance, setBalance] = useState('0');\n  const [chainId, setChainId] = useState('');\n  const [walletType, setWalletType] = useState(''); // 'metamask' or 'zedpay'\n\n  useEffect(() => {\n    checkConnection();\n  }, []);\n\n  const checkConnection = async () => {\n    if (typeof window.ethereum !== 'undefined') {\n      try {\n        const accounts = await window.ethereum.request({ method: 'eth_accounts' });\n        if (accounts.length > 0) {\n          setAddress(accounts[0]);\n          setIsConnected(true);\n          setWalletType('metamask');\n          await updateBalance(accounts[0]);\n          const chain = await window.ethereum.request({ method: 'eth_chainId' });\n          setChainId(chain);\n        }\n      } catch (error) {\n        console.error('Error checking connection:', error);\n      }\n    }\n  };\n\n  const updateBalance = async (addr) => {\n    try {\n      const bal = await window.ethereum.request({\n        method: 'eth_getBalance',\n        params: [addr, 'latest'],\n      });\n      const balanceInBNB = parseInt(bal, 16) / 1e18;\n      setBalance(balanceInBNB.toFixed(4));\n    } catch (error) {\n      console.error('Error fetching balance:', error);\n    }\n  };\n\n  const switchToBNBChain = async () => {\n    try {\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{ chainId: MATIC_CHAIN_ID }],\n      });\n    } catch (switchError) {\n      if (switchError.code === 4902) {\n        try {\n          await window.ethereum.request({\n            method: 'wallet_addEthereumChain',\n            params: [\n              {\n                chainId: MATIC_CHAIN_ID,\n                chainName: 'Polygon Testnet',\n                nativeCurrency: {\n                  name: 'tBNB',\n                  symbol: 'tBNB',\n                  decimals: 18,\n                },\n                rpcUrls: ['https://rpc-amoy.polygon.technology/'],\n                blockExplorerUrls: ['https://amoy.polygonscan.com/'],\n              },\n            ],\n          });\n        } catch (addError) {\n          throw addError;\n        }\n      } else {\n        throw switchError;\n      }\n    }\n  };\n\n  const connectMetaMask = async () => {\n    if (typeof window.ethereum === 'undefined') {\n      alert('MetaMask is not installed. Please install MetaMask to continue.');\n      return;\n    }\n\n    try {\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n      const chain = await window.ethereum.request({ method: 'eth_chainId' });\n      \n      if (chain !== MATIC_CHAIN_ID) {\n        await switchToBNBChain();\n      }\n\n      setAddress(accounts[0]);\n      setIsConnected(true);\n      setWalletType('metamask');\n      setChainId(chain);\n      await updateBalance(accounts[0]);\n\n      window.ethereum.on('accountsChanged', handleAccountsChanged);\n      window.ethereum.on('chainChanged', handleChainChanged);\n    } catch (error) {\n      console.error('Error connecting MetaMask:', error);\n      alert('Failed to connect MetaMask');\n    }\n  };\n\n  const connectZedpay = async () => {\n    try {\n      alert('Zedpay integration coming soon!');\n      setIsConnected(true);\n      setAddress('0xZEDPAY' + Math.random().toString(36).substring(7));\n      setBalance('0.0');\n      setWalletType('zedpay');\n    } catch (error) {\n      console.error('Error connecting Zedpay:', error);\n    }\n  };\n\n  const handleAccountsChanged = (accounts) => {\n    if (accounts.length === 0) {\n      disconnectWallet();\n    } else {\n      setAddress(accounts[0]);\n      updateBalance(accounts[0]);\n    }\n  };\n\n  const handleChainChanged = (newChainId) => {\n    setChainId(newChainId);\n    window.location.reload();\n  };\n\n  const disconnectWallet = () => {\n    setIsConnected(false);\n    setAddress('');\n    setBalance('0');\n    setChainId('');\n    setWalletType('');\n    \n    if (window.ethereum) {\n      window.ethereum.removeListener('accountsChanged', handleAccountsChanged);\n      window.ethereum.removeListener('chainChanged', handleChainChanged);\n    }\n  };\n\n  const connectWallet = connectMetaMask;\n\n  return (\n    <WalletContext.Provider\n      value={{\n        isConnected,\n        address,\n        balance,\n        chainId,\n        walletType,\n        connectWallet,\n        connectMetaMask,\n        connectZedpay,\n        disconnectWallet,\n        switchToBNBChain,\n      }}\n    >\n      {children}\n    </WalletContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
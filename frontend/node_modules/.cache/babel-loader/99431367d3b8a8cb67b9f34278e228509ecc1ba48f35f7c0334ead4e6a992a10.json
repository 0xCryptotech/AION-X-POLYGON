{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import BattleResultModal from'@/components/BattleResultModal';import{useContract}from'@/hooks/useContract';import{useWallet}from'@/context/WalletContext';import{getMarket,getOpenMarkets}from'@/utils/contract';import{subscribeToPythPrice}from'@/utils/pythPrice';import{CardHeader,CardContent,CardTitle}from\"@/components/ui/card\";import{Select,SelectTrigger,SelectValue,SelectContent,SelectItem}from\"@/components/ui/select\";import{Button}from\"@/components/ui/button\";// Local Label shim (avoid missing @radix/react-label dependency)\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Label=_ref=>{let{children,className=\"\"}=_ref;return/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium \".concat(className),children:children});};const COINS=[\"BTCUSDT\",\"ETHUSDT\",\"SOLUSDT\",\"BNBUSDT\",\"XRPUSDT\"];const AI_MODELS=[\"GPT-5 Oracle\",\"Claude-3\",\"DeepMind-FX\",\"Bloom-Alpha\"];// This component can be used as a controlled modal\nexport default function AIBattleModal(_ref2){let{isOpen,onClose}=_ref2;if(!isOpen)return null;return/*#__PURE__*/_jsx(FullscreenBattleModal,{onClose:onClose});}function FullscreenBattleModal(_ref3){var _selectedMarket$id;let{onClose}=_ref3;const{handlePlaceBet,loading:contractLoading}=useContract();const{isConnected}=useWallet();// selections\nconst[asset,setAsset]=useState(COINS[0]);const[timeframe]=useState('M10');// Fixed 10 minutes\nconst[modelA,setModelA]=useState(AI_MODELS[0]);const[modelB,setModelB]=useState(AI_MODELS[1]);const[openMarkets,setOpenMarkets]=useState([]);const[selectedMarket,setSelectedMarket]=useState(null);// live price (throttled)\nconst[price,setPrice]=useState(null);const[startPrice,setStartPrice]=useState(null);const wsRef=useRef(null);const lastPriceRef=useRef(null);const lastUpdateRef=useRef(0);// AI predictions\nconst[predA,setPredA]=useState({side:\"Bullish\",conf:65});const[predB,setPredB]=useState({side:\"Bearish\",conf:60});// betting state\nconst[stake,setStake]=useState(10);const[selectedBet,setSelectedBet]=useState(null);// 'A' | 'B'\nconst[userBetOutcome,setUserBetOutcome]=useState(null);// 0 or 1\nconst[lockedPredA,setLockedPredA]=useState(null);const[lockedPredB,setLockedPredB]=useState(null);const[isRunning,setIsRunning]=useState(false);const[countdown,setCountdown]=useState(0);const[battleTime,setBattleTime]=useState(0);const[targetTime,setTargetTime]=useState(0);// leaderboard & history\nconst[leaderboard,setLeaderboard]=useState({[modelA]:0,[modelB]:0});const[history,setHistory]=useState([]);// result modal\nconst[showResult,setShowResult]=useState(false);const[battleResult,setBattleResult]=useState(null);const[currentMarketId,setCurrentMarketId]=useState(null);useEffect(()=>{const fetchMarkets=async()=>{console.log('[AIBattle] Fetching markets...');const markets=await getOpenMarkets();console.log('[AIBattle] Received markets:',markets);// Fallback to mock if empty\nif(markets.length===0){const mockMarkets=[{id:201,title:'BTC/USD 10min',mode:0,closeTime:Math.floor(Date.now()/1000)+600,status:0,totalStaked:'0'},{id:202,title:'ETH/USD 10min',mode:0,closeTime:Math.floor(Date.now()/1000)+600,status:0,totalStaked:'0'}];console.log('[AIBattle] Using mock markets');setOpenMarkets(mockMarkets);setSelectedMarket(mockMarkets[0]);}else{setOpenMarkets(markets);const assetMarket=markets.find(m=>m.title.includes(asset.replace('USDT','')));if(assetMarket)setSelectedMarket(assetMarket);}};fetchMarkets();const interval=setInterval(fetchMarkets,30000);return()=>clearInterval(interval);},[asset]);// WebSocket price provider (Pyth Network real-time data)\n// Throttle updates to avoid rapid re-renders causing perceived flicker\nuseEffect(()=>{const symbol=asset===null||asset===void 0?void 0:asset.toLowerCase();if(!symbol)return;// Subscribe to Pyth Network price feed\nconst unsubscribe=subscribeToPythPrice(symbol,priceData=>{const p=priceData.price;lastPriceRef.current=p;const now=Date.now();// update state at most once every 300ms\nif(now-lastUpdateRef.current>300){lastUpdateRef.current=now;setPrice(p);}});return()=>{if(unsubscribe)unsubscribe();};},[asset]);// AI prediction mock\nuseEffect(()=>{let mounted=true;const fetchPred=async()=>{const pA=await fetchMockPrediction(modelA,asset,timeframe);const pB=await fetchMockPrediction(modelB,asset,timeframe);if(!mounted)return;setPredA(pA);setPredB(pB);};fetchPred();const id=setInterval(fetchPred,10000);return()=>{mounted=false;clearInterval(id);};},[modelA,modelB,asset,timeframe]);async function fetchMockPrediction(model,asset,timeframe){const seed=(model+asset+timeframe).split(\"\").reduce((s,c)=>s+c.charCodeAt(0),0);const v=Math.abs((Date.now()+seed)%100);await new Promise(r=>setTimeout(r,120));return{side:v>50?\"Bullish\":\"Bearish\",conf:40+v%60};}// Battle flow\nconst chooseBet=who=>{setSelectedBet(who);setLockedPredA(predA);setLockedPredB(predB);};const startBattle=async()=>{if(!isConnected)return alert(\"Connect wallet terlebih dahulu.\");if(!selectedBet)return alert(\"Pilih model AI untuk bertaruh terlebih dahulu.\");try{const timeframeSeconds=600;if(!selectedMarket){alert('No open market available. Please wait or select another asset.');return;}const marketId=selectedMarket.id;setCurrentMarketId(marketId);// Get AI prediction for selected model (use locked prediction)\nconst selectedPred=selectedBet==='A'?lockedPredA:lockedPredB;const outcome=selectedPred.side==='Bullish'?0:1;setUserBetOutcome(outcome);console.log(\"[DEBUG] Selected AI: \".concat(selectedBet,\", Prediction: \").concat(selectedPred.side,\", Outcome: \").concat(outcome));await handlePlaceBet(marketId,outcome,stake);console.log(\"Bet placed on Market \".concat(marketId,\", AI \").concat(selectedBet,\" predicts \").concat(selectedPred.side,\", Outcome: \").concat(outcome));setStartPrice(price);setCountdown(5);setBattleTime(timeframeSeconds);setTargetTime(timeframeSeconds);setIsRunning(true);}catch(error){console.error('Start battle error:',error);}};useEffect(()=>{if(!isRunning)return;if(countdown>0){const t=setTimeout(()=>setCountdown(c=>c-1),1000);return()=>clearTimeout(t);}},[isRunning,countdown]);// Battle timer (countdown)\nuseEffect(()=>{if(!isRunning||countdown>0)return;if(battleTime<=0){resolveBattle();return;}const interval=setInterval(()=>{setBattleTime(t=>t-1);},1000);return()=>clearInterval(interval);},[isRunning,countdown,battleTime]);const resolveBattle=async()=>{setIsRunning(false);setCountdown(0);console.log(\"[DEBUG] Battle ended. Market ID: \".concat(currentMarketId,\", User Bet Outcome: \").concat(userBetOutcome));if(!currentMarketId||userBetOutcome===null){console.error('[DEBUG] Missing marketId or userBetOutcome');alert('Battle data missing. Please try again.');setSelectedBet(null);return;}// Wait for backend to resolve (check every 2 seconds for 15 minutes)\nlet attempts=0;const maxAttempts=450;// 15 minutes (10 min battle + 5 min buffer)\nconst checkResolved=setInterval(async()=>{attempts++;console.log(\"[DEBUG] Polling attempt \".concat(attempts,\"/\").concat(maxAttempts,\" for market \").concat(currentMarketId));try{const market=await getMarket(currentMarketId);const status=market.status;// 0=OPEN, 1=CLOSED, 2=RESOLVED\nconsole.log(\"[DEBUG] Market \".concat(currentMarketId,\" status: \").concat(status));if(status===2){// RESOLVED\nclearInterval(checkResolved);const winningOutcome=market.winningOutcome.toNumber();const outcome=winningOutcome===0?\"Bullish\":\"Bearish\";const userWon=winningOutcome===userBetOutcome;console.log(\"[DEBUG RESULT] Market \".concat(currentMarketId,\" resolved:\"));console.log(\"  - Winning Outcome: \".concat(winningOutcome,\" (\").concat(outcome,\")\"));console.log(\"  - User Bet Outcome: \".concat(userBetOutcome));console.log(\"  - User Won: \".concat(userWon));setHistory(h=>[{id:Date.now(),asset,outcome,win:userWon},...h]);setSelectedBet(null);setLockedPredA(null);setLockedPredB(null);// Show result modal (with 2% fee)\nconst grossPayout=stake*2;const fee=grossPayout*0.02;const netPayout=grossPayout-fee;setBattleResult({won:userWon,prediction:userBetOutcome===0?'BULLISH':'BEARISH',outcome:outcome.toUpperCase(),stake:stake,payout:userWon?netPayout:0,profit:userWon?netPayout-stake:-stake,fee:userWon?fee:0,asset:asset});setShowResult(true);}else if(attempts>=maxAttempts){clearInterval(checkResolved);console.log('[DEBUG] Timeout waiting for resolution');alert('Battle ended! Check Portfolio in a moment for your rewards.');setSelectedBet(null);setLockedPredA(null);setLockedPredB(null);}}catch(error){console.error('[DEBUG] Check resolved error:',error);}},2000);// Check every 2 seconds\n};// UI\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-50 bg-slate-900/95 flex items-center justify-center p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-5xl bg-slate-800/80 border border-slate-700 rounded-2xl shadow-2xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent\",children:\"AI vs AI Battle Arena\"}),/*#__PURE__*/_jsx(Button,{onClick:onClose,variant:\"outline\",children:\"\\u2715 Close\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{children:\"CURRENT PRICE\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-cyan-400\",children:price?\"\".concat(price.toLocaleString()):\"$---\"}),isRunning&&startPrice&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-slate-400 mt-1\",children:[\"Start: $\",startPrice.toLocaleString()]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] text-slate-500 mt-1\",children:\"Powered by Pyth Network\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-1\",children:[/*#__PURE__*/_jsx(Label,{children:\"Select Market\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsxs(Select,{value:selectedMarket===null||selectedMarket===void 0?void 0:(_selectedMarket$id=selectedMarket.id)===null||_selectedMarket$id===void 0?void 0:_selectedMarket$id.toString(),onValueChange:v=>{const market=openMarkets.find(m=>m.id.toString()===v);setSelectedMarket(market);if(market!==null&&market!==void 0&&market.title.includes('BTC'))setAsset('BTCUSDT');else if(market!==null&&market!==void 0&&market.title.includes('ETH'))setAsset('ETHUSDT');else if(market!==null&&market!==void 0&&market.title.includes('SOL'))setAsset('SOLUSDT');else if(market!==null&&market!==void 0&&market.title.includes('BNB'))setAsset('BNBUSDT');else if(market!==null&&market!==void 0&&market.title.includes('XRP'))setAsset('XRPUSDT');},children:[/*#__PURE__*/_jsx(SelectTrigger,{children:/*#__PURE__*/_jsx(SelectValue,{placeholder:\"Select Market\"})}),/*#__PURE__*/_jsxs(SelectContent,{children:[openMarkets.length===0&&/*#__PURE__*/_jsx(SelectItem,{value:\"none\",disabled:true,children:\"Loading markets...\"}),openMarkets.map(m=>/*#__PURE__*/_jsxs(SelectItem,{value:m.id.toString(),children:[m.title,\" (\",Math.floor((m.closeTime-Date.now()/1000)/60),\"m left)\"]},m.id))]})]})}),selectedMarket&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-slate-400 mt-1\",children:[\"Market #\",selectedMarket.id,\" \\u2022 Pool: \",parseFloat(selectedMarket.totalStaked).toFixed(2),\" AION\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(Label,{children:\"Battle Duration\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 text-2xl font-bold text-cyan-400\",children:\"10 Minutes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-400\",children:\"Fast resolution\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-slate-800 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:\"AI Model 1\"})}),/*#__PURE__*/_jsxs(Select,{value:modelA,onValueChange:v=>setModelA(v),children:[/*#__PURE__*/_jsx(SelectTrigger,{children:/*#__PURE__*/_jsx(SelectValue,{placeholder:\"Select Model\"})}),/*#__PURE__*/_jsx(SelectContent,{children:AI_MODELS.map(m=>/*#__PURE__*/_jsx(SelectItem,{value:m,children:m},m))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-xs text-slate-400\",children:[\"Confidence: \",predA.conf,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 font-bold \".concat(predA.side==='Bullish'?'text-green-400':'text-red-400'),children:predA.side==='Bullish'?'üìà BULLISH':'üìâ BEARISH'}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(Button,{variant:selectedBet==='A'?'secondary':'default',onClick:()=>chooseBet('A'),className:\"w-full\",children:\"Bet On AI 1\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-slate-800 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:\"AI Model 2\"})}),/*#__PURE__*/_jsxs(Select,{value:modelB,onValueChange:v=>setModelB(v),children:[/*#__PURE__*/_jsx(SelectTrigger,{children:/*#__PURE__*/_jsx(SelectValue,{placeholder:\"Select Model\"})}),/*#__PURE__*/_jsx(SelectContent,{children:AI_MODELS.map(m=>/*#__PURE__*/_jsx(SelectItem,{value:m,children:m},m))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-xs text-slate-400\",children:[\"Confidence: \",predB.conf,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 font-bold \".concat(predB.side==='Bullish'?'text-green-400':'text-red-400'),children:predB.side==='Bullish'?'üìà BULLISH':'üìâ BEARISH'}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(Button,{variant:selectedBet==='B'?'secondary':'default',onClick:()=>chooseBet('B'),className:\"w-full\",children:\"Bet On AI 2\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 grid grid-cols-2 gap-4 items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{children:\"Stake Amount (AION)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"w-full mt-1 p-2 rounded-md bg-slate-900 border\",value:stake,onChange:e=>setStake(Number(e.target.value))}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-400 mt-1\",children:\"\\uD83C\\uDFAF Win: ~1.96x stake (2% fee)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[isRunning&&countdown===0&&battleTime>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-slate-400\",children:[\"Time Remaining (\",timeframe,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-3xl font-mono font-bold text-cyan-400\",children:[Math.floor(battleTime/60),\":\",(battleTime%60).toString().padStart(2,'0')]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-slate-700 rounded-full h-2 mt-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-cyan-500 to-blue-500 h-2 rounded-full transition-all duration-1000\",style:{width:\"\".concat(battleTime/targetTime*100,\"%\")}})})]}),isRunning&&countdown>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-slate-400\",children:\"Starting in\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl font-bold text-yellow-400 animate-pulse\",children:countdown})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>{setSelectedBet(null);setStake(10);},disabled:isRunning,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:startBattle,disabled:isRunning||contractLoading,className:\"bg-emerald-500\",children:contractLoading?'Approving...':'Start Battle'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{children:\"Leaderboard\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 grid grid-cols-2 gap-2\",children:Object.keys(leaderboard).map(k=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-slate-900 rounded\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-400\",children:k}),/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-lg\",children:leaderboard[k]})]},k))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{children:\"History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 max-h-40 overflow-auto text-xs\",children:history.map(h=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 border-b border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[h.asset,\" \\u2014 \",h.outcome,\" \",h.win?'‚úÖ':'‚ùå']}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-slate-400\",children:[\"Result: \",h.outcome]})]},h.id))})]})]})]}),/*#__PURE__*/_jsx(BattleResultModal,{isOpen:showResult,onClose:()=>setShowResult(false),result:battleResult})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","BattleResultModal","useContract","useWallet","getMarket","getOpenMarkets","subscribeToPythPrice","CardHeader","CardContent","CardTitle","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","Button","jsx","_jsx","jsxs","_jsxs","Label","_ref","children","className","concat","COINS","AI_MODELS","AIBattleModal","_ref2","isOpen","onClose","FullscreenBattleModal","_ref3","_selectedMarket$id","handlePlaceBet","loading","contractLoading","isConnected","asset","setAsset","timeframe","modelA","setModelA","modelB","setModelB","openMarkets","setOpenMarkets","selectedMarket","setSelectedMarket","price","setPrice","startPrice","setStartPrice","wsRef","lastPriceRef","lastUpdateRef","predA","setPredA","side","conf","predB","setPredB","stake","setStake","selectedBet","setSelectedBet","userBetOutcome","setUserBetOutcome","lockedPredA","setLockedPredA","lockedPredB","setLockedPredB","isRunning","setIsRunning","countdown","setCountdown","battleTime","setBattleTime","targetTime","setTargetTime","leaderboard","setLeaderboard","history","setHistory","showResult","setShowResult","battleResult","setBattleResult","currentMarketId","setCurrentMarketId","fetchMarkets","console","log","markets","length","mockMarkets","id","title","mode","closeTime","Math","floor","Date","now","status","totalStaked","assetMarket","find","m","includes","replace","interval","setInterval","clearInterval","symbol","toLowerCase","unsubscribe","priceData","p","current","mounted","fetchPred","pA","fetchMockPrediction","pB","model","seed","split","reduce","s","c","charCodeAt","v","abs","Promise","r","setTimeout","chooseBet","who","startBattle","alert","timeframeSeconds","marketId","selectedPred","outcome","error","t","clearTimeout","resolveBattle","attempts","maxAttempts","checkResolved","market","winningOutcome","toNumber","userWon","h","win","grossPayout","fee","netPayout","won","prediction","toUpperCase","payout","profit","onClick","variant","toLocaleString","value","toString","onValueChange","placeholder","disabled","map","parseFloat","toFixed","type","onChange","e","Number","target","padStart","style","width","Object","keys","k","result"],"sources":["/Users/idcuq/Documents/AION-X POLYGON/Aion-x-main/frontend/src/components/AIBattleModal.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport BattleResultModal from '@/components/BattleResultModal';\nimport { useContract } from '@/hooks/useContract';\nimport { useWallet } from '@/context/WalletContext';\nimport { getMarket, getOpenMarkets } from '@/utils/contract';\nimport { subscribeToPythPrice } from '@/utils/pythPrice';\nimport {\n  CardHeader,\n  CardContent,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport {\n  Select,\n  SelectTrigger,\n  SelectValue,\n  SelectContent,\n  SelectItem,\n} from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\n\n// Local Label shim (avoid missing @radix/react-label dependency)\nconst Label = ({ children, className = \"\" }) => (\n  <label className={`text-sm font-medium ${className}`}>{children}</label>\n);\n\nconst COINS = [\"BTCUSDT\", \"ETHUSDT\", \"SOLUSDT\", \"BNBUSDT\", \"XRPUSDT\"];\n\nconst AI_MODELS = [\"GPT-5 Oracle\", \"Claude-3\", \"DeepMind-FX\", \"Bloom-Alpha\"];\n\n// This component can be used as a controlled modal\nexport default function AIBattleModal({ isOpen, onClose }) {\n  if (!isOpen) return null;\n  return <FullscreenBattleModal onClose={onClose} />;\n}\n\nfunction FullscreenBattleModal({ onClose }) {\n  const { handlePlaceBet, loading: contractLoading } = useContract();\n  const { isConnected } = useWallet();\n  \n  // selections\n  const [asset, setAsset] = useState(COINS[0]);\n  const [timeframe] = useState('M10'); // Fixed 10 minutes\n  const [modelA, setModelA] = useState(AI_MODELS[0]);\n  const [modelB, setModelB] = useState(AI_MODELS[1]);\n  const [openMarkets, setOpenMarkets] = useState([]);\n  const [selectedMarket, setSelectedMarket] = useState(null);\n\n  // live price (throttled)\n  const [price, setPrice] = useState(null);\n  const [startPrice, setStartPrice] = useState(null);\n  const wsRef = useRef(null);\n  const lastPriceRef = useRef(null);\n  const lastUpdateRef = useRef(0);\n\n  // AI predictions\n  const [predA, setPredA] = useState({ side: \"Bullish\", conf: 65 });\n  const [predB, setPredB] = useState({ side: \"Bearish\", conf: 60 });\n\n  // betting state\n  const [stake, setStake] = useState(10);\n  const [selectedBet, setSelectedBet] = useState(null); // 'A' | 'B'\n  const [userBetOutcome, setUserBetOutcome] = useState(null); // 0 or 1\n  const [lockedPredA, setLockedPredA] = useState(null);\n  const [lockedPredB, setLockedPredB] = useState(null);\n  const [isRunning, setIsRunning] = useState(false);\n  const [countdown, setCountdown] = useState(0);\n  const [battleTime, setBattleTime] = useState(0);\n  const [targetTime, setTargetTime] = useState(0);\n\n  // leaderboard & history\n  const [leaderboard, setLeaderboard] = useState({ [modelA]: 0, [modelB]: 0 });\n  const [history, setHistory] = useState([]);\n  \n  // result modal\n  const [showResult, setShowResult] = useState(false);\n  const [battleResult, setBattleResult] = useState(null);\n  const [currentMarketId, setCurrentMarketId] = useState(null);\n\n  useEffect(() => {\n    const fetchMarkets = async () => {\n      console.log('[AIBattle] Fetching markets...');\n      const markets = await getOpenMarkets();\n      console.log('[AIBattle] Received markets:', markets);\n      \n      // Fallback to mock if empty\n      if (markets.length === 0) {\n        const mockMarkets = [\n          { id: 201, title: 'BTC/USD 10min', mode: 0, closeTime: Math.floor(Date.now()/1000) + 600, status: 0, totalStaked: '0' },\n          { id: 202, title: 'ETH/USD 10min', mode: 0, closeTime: Math.floor(Date.now()/1000) + 600, status: 0, totalStaked: '0' },\n        ];\n        console.log('[AIBattle] Using mock markets');\n        setOpenMarkets(mockMarkets);\n        setSelectedMarket(mockMarkets[0]);\n      } else {\n        setOpenMarkets(markets);\n        const assetMarket = markets.find(m => m.title.includes(asset.replace('USDT', '')));\n        if (assetMarket) setSelectedMarket(assetMarket);\n      }\n    };\n    fetchMarkets();\n    const interval = setInterval(fetchMarkets, 30000);\n    return () => clearInterval(interval);\n  }, [asset]);\n\n  // WebSocket price provider (Pyth Network real-time data)\n  // Throttle updates to avoid rapid re-renders causing perceived flicker\n  useEffect(() => {\n    const symbol = asset?.toLowerCase();\n    if (!symbol) return;\n\n    // Subscribe to Pyth Network price feed\n    const unsubscribe = subscribeToPythPrice(symbol, (priceData) => {\n      const p = priceData.price;\n      lastPriceRef.current = p;\n      const now = Date.now();\n      // update state at most once every 300ms\n      if (now - lastUpdateRef.current > 300) {\n        lastUpdateRef.current = now;\n        setPrice(p);\n      }\n    });\n\n    return () => {\n      if (unsubscribe) unsubscribe();\n    };\n  }, [asset]);\n\n  // AI prediction mock\n  useEffect(() => {\n    let mounted = true;\n    const fetchPred = async () => {\n      const pA = await fetchMockPrediction(modelA, asset, timeframe);\n      const pB = await fetchMockPrediction(modelB, asset, timeframe);\n      if (!mounted) return;\n      setPredA(pA);\n      setPredB(pB);\n    };\n    fetchPred();\n    const id = setInterval(fetchPred, 10_000);\n    return () => { mounted = false; clearInterval(id); };\n  }, [modelA, modelB, asset, timeframe]);\n\n  async function fetchMockPrediction(model, asset, timeframe) {\n    const seed = (model + asset + timeframe).split(\"\").reduce((s, c) => s + c.charCodeAt(0), 0);\n    const v = Math.abs((Date.now() + seed) % 100);\n    await new Promise((r) => setTimeout(r, 120));\n    return { side: v > 50 ? \"Bullish\" : \"Bearish\", conf: 40 + (v % 60) };\n  }\n\n  // Battle flow\n  const chooseBet = (who) => {\n    setSelectedBet(who);\n    setLockedPredA(predA);\n    setLockedPredB(predB);\n  };\n\n  const startBattle = async () => {\n    if (!isConnected) return alert(\"Connect wallet terlebih dahulu.\");\n    if (!selectedBet) return alert(\"Pilih model AI untuk bertaruh terlebih dahulu.\");\n    \n    try {\n      const timeframeSeconds = 600;\n      \n      if (!selectedMarket) {\n        alert('No open market available. Please wait or select another asset.');\n        return;\n      }\n      \n      const marketId = selectedMarket.id;\n      setCurrentMarketId(marketId);\n      \n      // Get AI prediction for selected model (use locked prediction)\n      const selectedPred = selectedBet === 'A' ? lockedPredA : lockedPredB;\n      const outcome = selectedPred.side === 'Bullish' ? 0 : 1;\n      setUserBetOutcome(outcome);\n      \n      console.log(`[DEBUG] Selected AI: ${selectedBet}, Prediction: ${selectedPred.side}, Outcome: ${outcome}`);\n      \n      await handlePlaceBet(marketId, outcome, stake);\n      \n      console.log(`Bet placed on Market ${marketId}, AI ${selectedBet} predicts ${selectedPred.side}, Outcome: ${outcome}`);\n      \n      setStartPrice(price);\n      setCountdown(5);\n      setBattleTime(timeframeSeconds);\n      setTargetTime(timeframeSeconds);\n      setIsRunning(true);\n    } catch (error) {\n      console.error('Start battle error:', error);\n    }\n  };\n\n  useEffect(() => {\n    if (!isRunning) return;\n    if (countdown > 0) {\n      const t = setTimeout(() => setCountdown((c) => c - 1), 1000);\n      return () => clearTimeout(t);\n    }\n  }, [isRunning, countdown]);\n  \n  // Battle timer (countdown)\n  useEffect(() => {\n    if (!isRunning || countdown > 0) return;\n    if (battleTime <= 0) {\n      resolveBattle();\n      return;\n    }\n    const interval = setInterval(() => {\n      setBattleTime((t) => t - 1);\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [isRunning, countdown, battleTime]);\n\n  const resolveBattle = async () => {\n    setIsRunning(false);\n    setCountdown(0);\n    \n    console.log(`[DEBUG] Battle ended. Market ID: ${currentMarketId}, User Bet Outcome: ${userBetOutcome}`);\n    \n    if (!currentMarketId || userBetOutcome === null) {\n      console.error('[DEBUG] Missing marketId or userBetOutcome');\n      alert('Battle data missing. Please try again.');\n      setSelectedBet(null);\n      return;\n    }\n    \n    // Wait for backend to resolve (check every 2 seconds for 15 minutes)\n    let attempts = 0;\n    const maxAttempts = 450; // 15 minutes (10 min battle + 5 min buffer)\n    \n    const checkResolved = setInterval(async () => {\n      attempts++;\n      console.log(`[DEBUG] Polling attempt ${attempts}/${maxAttempts} for market ${currentMarketId}`);\n      \n      try {\n        const market = await getMarket(currentMarketId);\n        const status = market.status; // 0=OPEN, 1=CLOSED, 2=RESOLVED\n        console.log(`[DEBUG] Market ${currentMarketId} status: ${status}`);\n        \n        if (status === 2) { // RESOLVED\n          clearInterval(checkResolved);\n          \n          const winningOutcome = market.winningOutcome.toNumber();\n          const outcome = winningOutcome === 0 ? \"Bullish\" : \"Bearish\";\n          const userWon = winningOutcome === userBetOutcome;\n          \n          console.log(`[DEBUG RESULT] Market ${currentMarketId} resolved:`);\n          console.log(`  - Winning Outcome: ${winningOutcome} (${outcome})`);\n          console.log(`  - User Bet Outcome: ${userBetOutcome}`);\n          console.log(`  - User Won: ${userWon}`);\n          \n          setHistory((h) => [{ id: Date.now(), asset, outcome, win: userWon }, ...h]);\n          setSelectedBet(null);\n          setLockedPredA(null);\n          setLockedPredB(null);\n          \n          // Show result modal (with 2% fee)\n          const grossPayout = stake * 2;\n          const fee = grossPayout * 0.02;\n          const netPayout = grossPayout - fee;\n          \n          setBattleResult({\n            won: userWon,\n            prediction: userBetOutcome === 0 ? 'BULLISH' : 'BEARISH',\n            outcome: outcome.toUpperCase(),\n            stake: stake,\n            payout: userWon ? netPayout : 0,\n            profit: userWon ? (netPayout - stake) : -stake,\n            fee: userWon ? fee : 0,\n            asset: asset\n          });\n          setShowResult(true);\n        } else if (attempts >= maxAttempts) {\n          clearInterval(checkResolved);\n          console.log('[DEBUG] Timeout waiting for resolution');\n          alert('Battle ended! Check Portfolio in a moment for your rewards.');\n          setSelectedBet(null);\n          setLockedPredA(null);\n          setLockedPredB(null);\n        }\n      } catch (error) {\n        console.error('[DEBUG] Check resolved error:', error);\n      }\n    }, 2000); // Check every 2 seconds\n  };\n\n  // UI\n  return (\n    <div className=\"fixed inset-0 z-50 bg-slate-900/95 flex items-center justify-center p-6\">\n      <div className=\"w-full max-w-5xl bg-slate-800/80 border border-slate-700 rounded-2xl shadow-2xl p-6\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-2xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent\">AI vs AI Battle Arena</h3>\n          <Button onClick={onClose} variant=\"outline\">‚úï Close</Button>\n        </div>\n\n        <div className=\"grid grid-cols-3 gap-4 items-center\">\n          <div>\n            <Label>CURRENT PRICE</Label>\n            <div className=\"text-2xl font-bold text-cyan-400\">{price ? `${price.toLocaleString()}` : \"$---\"}</div>\n            {isRunning && startPrice && (\n              <div className=\"text-xs text-slate-400 mt-1\">\n                Start: ${startPrice.toLocaleString()}\n              </div>\n            )}\n            <div className=\"text-[10px] text-slate-500 mt-1\">Powered by Pyth Network</div>\n          </div>\n\n          <div className=\"col-span-1\">\n            <Label>Select Market</Label>\n            <div className=\"mt-1\">\n              <Select value={selectedMarket?.id?.toString()} onValueChange={(v) => {\n                const market = openMarkets.find(m => m.id.toString() === v);\n                setSelectedMarket(market);\n                if (market?.title.includes('BTC')) setAsset('BTCUSDT');\n                else if (market?.title.includes('ETH')) setAsset('ETHUSDT');\n                else if (market?.title.includes('SOL')) setAsset('SOLUSDT');\n                else if (market?.title.includes('BNB')) setAsset('BNBUSDT');\n                else if (market?.title.includes('XRP')) setAsset('XRPUSDT');\n              }}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select Market\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {openMarkets.length === 0 && (\n                    <SelectItem value=\"none\" disabled>Loading markets...</SelectItem>\n                  )}\n                  {openMarkets.map((m) => (\n                    <SelectItem key={m.id} value={m.id.toString()}>\n                      {m.title} ({Math.floor((m.closeTime - Date.now()/1000)/60)}m left)\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            {selectedMarket && (\n              <div className=\"text-xs text-slate-400 mt-1\">\n                Market #{selectedMarket.id} ‚Ä¢ Pool: {parseFloat(selectedMarket.totalStaked).toFixed(2)} AION\n              </div>\n            )}\n          </div>\n\n          <div className=\"text-right\">\n            <Label>Battle Duration</Label>\n            <div className=\"mt-1 text-2xl font-bold text-cyan-400\">10 Minutes</div>\n            <div className=\"text-xs text-slate-400\">Fast resolution</div>\n          </div>\n        </div>\n\n        <div className=\"mt-6 grid grid-cols-2 gap-4\">\n          <div className=\"p-4 bg-slate-800 rounded-lg\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"font-semibold\">AI Model 1</div>\n            </div>\n            <Select value={modelA} onValueChange={(v) => setModelA(v)}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select Model\" />\n              </SelectTrigger>\n              <SelectContent>\n                {AI_MODELS.map((m) => (\n                  <SelectItem key={m} value={m}>{m}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <div className=\"mt-2 text-xs text-slate-400\">Confidence: {predA.conf}%</div>\n            <div className={`mt-3 font-bold ${predA.side === 'Bullish' ? 'text-green-400' : 'text-red-400'}`}>{predA.side === 'Bullish' ? 'üìà BULLISH' : 'üìâ BEARISH'}</div>\n            <div className=\"mt-4\">\n              <Button variant={selectedBet === 'A' ? 'secondary' : 'default'} onClick={() => chooseBet('A')} className=\"w-full\">Bet On AI 1</Button>\n            </div>\n          </div>\n\n          <div className=\"p-4 bg-slate-800 rounded-lg\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"font-semibold\">AI Model 2</div>\n            </div>\n            <Select value={modelB} onValueChange={(v) => setModelB(v)}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select Model\" />\n              </SelectTrigger>\n              <SelectContent>\n                {AI_MODELS.map((m) => (\n                  <SelectItem key={m} value={m}>{m}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <div className=\"mt-2 text-xs text-slate-400\">Confidence: {predB.conf}%</div>\n            <div className={`mt-3 font-bold ${predB.side === 'Bullish' ? 'text-green-400' : 'text-red-400'}`}>{predB.side === 'Bullish' ? 'üìà BULLISH' : 'üìâ BEARISH'}</div>\n            <div className=\"mt-4\">\n              <Button variant={selectedBet === 'B' ? 'secondary' : 'default'} onClick={() => chooseBet('B')} className=\"w-full\">Bet On AI 2</Button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mt-6 grid grid-cols-2 gap-4 items-end\">\n          <div>\n            <Label>Stake Amount (AION)</Label>\n            <input type=\"number\" className=\"w-full mt-1 p-2 rounded-md bg-slate-900 border\" value={stake} onChange={(e) => setStake(Number(e.target.value))} />\n            <div className=\"text-xs text-slate-400 mt-1\">üéØ Win: ~1.96x stake (2% fee)</div>\n          </div>\n\n          <div className=\"text-right\">\n            {isRunning && countdown === 0 && battleTime > 0 && (\n              <div className=\"mb-2 text-center\">\n                <div className=\"text-sm text-slate-400\">Time Remaining ({timeframe})</div>\n                <div className=\"text-3xl font-mono font-bold text-cyan-400\">\n                  {Math.floor(battleTime / 60)}:{(battleTime % 60).toString().padStart(2, '0')}\n                </div>\n                <div className=\"w-full bg-slate-700 rounded-full h-2 mt-2\">\n                  <div \n                    className=\"bg-gradient-to-r from-cyan-500 to-blue-500 h-2 rounded-full transition-all duration-1000\"\n                    style={{ width: `${(battleTime / targetTime) * 100}%` }}\n                  />\n                </div>\n              </div>\n            )}\n            {isRunning && countdown > 0 && (\n              <div className=\"mb-2 text-center\">\n                <div className=\"text-sm text-slate-400\">Starting in</div>\n                <div className=\"text-4xl font-bold text-yellow-400 animate-pulse\">\n                  {countdown}\n                </div>\n              </div>\n            )}\n            <div className=\"flex gap-2\">\n              <Button onClick={() => { setSelectedBet(null); setStake(10); }} disabled={isRunning}>Cancel</Button>\n              <Button onClick={startBattle} disabled={isRunning || contractLoading} className=\"bg-emerald-500\">\n                {contractLoading ? 'Approving...' : 'Start Battle'}\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mt-6 grid grid-cols-2 gap-4\">\n          <div>\n            <Label>Leaderboard</Label>\n            <div className=\"mt-2 grid grid-cols-2 gap-2\">\n              {Object.keys(leaderboard).map((k) => (\n                <div key={k} className=\"p-2 bg-slate-900 rounded\"> \n                  <div className=\"text-xs text-slate-400\">{k}</div>\n                  <div className=\"font-bold text-lg\">{leaderboard[k]}</div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <div>\n            <Label>History</Label>\n            <div className=\"mt-2 max-h-40 overflow-auto text-xs\">\n              {history.map((h) => (\n                <div key={h.id} className=\"p-2 border-b border-slate-700\">\n                  <div>{h.asset} ‚Äî {h.outcome} {h.win ? '‚úÖ' : '‚ùå'}</div>\n                  <div className=\"text-slate-400\">Result: {h.outcome}</div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <BattleResultModal\n        isOpen={showResult}\n        onClose={() => setShowResult(false)}\n        result={battleResult}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}